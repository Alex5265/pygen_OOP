# ÐšÐ»Ð°ÑÑ BirthInfo ðŸŒ¶ï¸
# Ð ÐµÐ°Ð»Ð¸Ð·ÑƒÐ¹Ñ‚Ðµ ÐºÐ»Ð°ÑÑ BirthInfo, Ð¾Ð¿Ð¸ÑÑ‹Ð²Ð°ÑŽÑ‰Ð¸Ð¹ Ð´Ð°Ð½Ð½Ñ‹Ðµ Ð¾ Ð´Ð°Ñ‚Ðµ Ñ€Ð¾Ð¶Ð´ÐµÐ½Ð¸Ñ. ÐŸÑ€Ð¸ ÑÐ¾Ð·Ð´Ð°Ð½Ð¸Ð¸ ÑÐºÐ·ÐµÐ¼Ð¿Ð»ÑÑ€Ð° ÐºÐ»Ð°ÑÑ Ð´Ð¾Ð»Ð¶ÐµÐ½ Ð¿Ñ€Ð¸Ð½Ð¸Ð¼Ð°Ñ‚ÑŒ Ð¾Ð´Ð¸Ð½ Ð°Ñ€Ð³ÑƒÐ¼ÐµÐ½Ñ‚:
#
# birth_date â€” Ð´Ð°Ñ‚Ð° Ñ€Ð¾Ð¶Ð´ÐµÐ½Ð¸Ñ, Ð¿Ñ€ÐµÐ´ÑÑ‚Ð°Ð²Ð»ÐµÐ½Ð½Ð°Ñ Ð² Ð¾Ð´Ð½Ð¾Ð¼ Ð¸Ð· ÑÐ»ÐµÐ´ÑƒÑŽÑ‰Ð¸Ñ… Ð²Ð°Ñ€Ð¸Ð°Ð½Ñ‚Ð¾Ð²:
# ÑÐºÐ·ÐµÐ¼Ð¿Ð»ÑÑ€ ÐºÐ»Ð°ÑÑÐ° date
# ÑÑ‚Ñ€Ð¾ÐºÐ° Ñ Ð´Ð°Ñ‚Ð¾Ð¹ Ð² ISO Ñ„Ð¾Ñ€Ð¼Ð°Ñ‚Ðµ
# ÑÐ¿Ð¸ÑÐ¾Ðº Ð¸Ð»Ð¸ ÐºÐ¾Ñ€Ñ‚ÐµÐ¶ Ð¸Ð· Ñ‚Ñ€ÐµÑ… Ñ†ÐµÐ»Ñ‹Ñ… Ñ‡Ð¸ÑÐµÐ»: Ð³Ð¾Ð´Ð°, Ð¼ÐµÑÑÑ†Ð° Ð¸ Ð´Ð½Ñ
# Ð•ÑÐ»Ð¸ Ð´Ð°Ñ‚Ð° Ñ€Ð¾Ð¶Ð´ÐµÐ½Ð¸Ñ ÑÐ²Ð»ÑÐµÑ‚ÑÑ Ð½ÐµÐºÐ¾Ñ€Ñ€ÐµÐºÑ‚Ð½Ð¾Ð¹ Ð¸Ð»Ð¸ Ð¿Ñ€ÐµÐ´ÑÑ‚Ð°Ð²Ð»ÐµÐ½Ð° Ð² ÐºÐ°ÐºÐ¾Ð¼-Ð»Ð¸Ð±Ð¾ Ð´Ñ€ÑƒÐ³Ð¾Ð¼ Ñ„Ð¾Ñ€Ð¼Ð°Ñ‚Ðµ, Ð´Ð¾Ð»Ð¶Ð½Ð¾ Ð±Ñ‹Ñ‚ÑŒ Ð²Ð¾Ð·Ð±ÑƒÐ¶Ð´ÐµÐ½Ð¾ Ð¸ÑÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ðµ TypeError Ñ Ñ‚ÐµÐºÑÑ‚Ð¾Ð¼:
#
# ÐÑ€Ð³ÑƒÐ¼ÐµÐ½Ñ‚ Ð¿ÐµÑ€ÐµÐ´Ð°Ð½Ð½Ð¾Ð³Ð¾ Ñ‚Ð¸Ð¿Ð° Ð½Ðµ Ð¿Ð¾Ð´Ð´ÐµÑ€Ð¶Ð¸Ð²Ð°ÐµÑ‚ÑÑ
# Ð­ÐºÐ·ÐµÐ¼Ð¿Ð»ÑÑ€ ÐºÐ»Ð°ÑÑÐ° BirthInfo Ð´Ð¾Ð»Ð¶ÐµÐ½ Ð¸Ð¼ÐµÑ‚ÑŒ Ð¾Ð´Ð¸Ð½ Ð°Ñ‚Ñ€Ð¸Ð±ÑƒÑ‚:
#
# birth_date â€” Ð´Ð°Ñ‚Ð° Ñ€Ð¾Ð¶Ð´ÐµÐ½Ð¸Ñ Ð² Ð²Ð¸Ð´Ðµ ÑÐºÐ·ÐµÐ¼Ð¿Ð»ÑÑ€Ð° ÐºÐ»Ð°ÑÑÐ° date
# ÐšÐ»Ð°ÑÑ BirthInfo Ð´Ð¾Ð»Ð¶ÐµÐ½ Ð¸Ð¼ÐµÑ‚ÑŒ Ð¾Ð´Ð½Ð¾ ÑÐ²Ð¾Ð¹ÑÑ‚Ð²Ð¾:
#
# age â€” ÑÐ²Ð¾Ð¹ÑÑ‚Ð²Ð¾, Ð´Ð¾ÑÑ‚ÑƒÐ¿Ð½Ð¾Ðµ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ð´Ð»Ñ Ñ‡Ñ‚ÐµÐ½Ð¸Ñ, Ð²Ð¾Ð·Ð²Ñ€Ð°Ñ‰Ð°ÑŽÑ‰ÐµÐµ Ñ‚ÐµÐºÑƒÑ‰Ð¸Ð¹ Ð²Ð¾Ð·Ñ€Ð°ÑÑ‚ Ð² Ð³Ð¾Ð´Ð°Ñ…, Ñ‚Ð¾ ÐµÑÑ‚ÑŒ ÐºÐ¾Ð»Ð¸Ñ‡ÐµÑÑ‚Ð²Ð¾ Ð¿Ð¾Ð»Ð½Ñ‹Ñ… Ð»ÐµÑ‚, Ð¿Ñ€Ð¾ÑˆÐµÐ´ÑˆÐ¸Ñ… Ñ Ð´Ð°Ñ‚Ñ‹ Ñ€Ð¾Ð¶Ð´ÐµÐ½Ð¸Ñ Ð½Ð° ÑÐµÐ³Ð¾Ð´Ð½ÑÑˆÐ½Ð¸Ð¹ Ð´ÐµÐ½ÑŒ
# ÐŸÑ€Ð¸Ð¼ÐµÑ‡Ð°Ð½Ð¸Ðµ 1. Ð’Ð¾Ð·Ñ€Ð°ÑÑ‚ Ð² Ð³Ð¾Ð´Ð°Ñ… Ð´Ð¾Ð»Ð¶ÐµÐ½ Ð²Ñ‹Ñ‡Ð¸ÑÐ»ÑÑ‚ÑŒÑÑ Ñ‚Ð°Ðº Ð¶Ðµ, ÐºÐ°Ðº Ð¸ Ð¾Ð±Ñ‹Ñ‡Ð½Ñ‹Ð¹ Ð²Ð¾Ð·Ñ€Ð°ÑÑ‚ Ñ‡ÐµÐ»Ð¾Ð²ÐµÐºÐ°, Ñ‚Ð¾ ÐµÑÑ‚ÑŒ Ð² Ð´ÐµÐ½ÑŒ Ñ€Ð¾Ð¶Ð´ÐµÐ½Ð¸Ñ ÐµÐ³Ð¾ Ð²Ð¾Ð·Ñ€Ð°ÑÑ‚ ÑƒÐ²ÐµÐ»Ð¸Ñ‡Ð¸Ð²Ð°ÐµÑ‚ÑÑ Ð½Ð° Ð¾Ð´Ð¸Ð½ Ð³Ð¾Ð´.
#
# ÐŸÑ€Ð¸Ð²ÐµÐ´ÐµÐ½Ð½Ñ‹Ð¹ Ð½Ð¸Ð¶Ðµ ÐºÐ¾Ð´:
#
# birthinfo = BirthInfo(date(2023, 2, 26))
#
# print(birthinfo.age)
# Ð² 2024-02-25 Ð´Ð¾Ð»Ð¶ÐµÐ½ Ð²Ñ‹Ð²Ð¾Ð´Ð¸Ñ‚ÑŒ:0
# Ð² 2024-02-26 Ð´Ð¾Ð»Ð¶ÐµÐ½ Ð²Ñ‹Ð²Ð¾Ð´Ð¸Ñ‚ÑŒ:1
# Ð² 2025-02-25 Ð´Ð¾Ð»Ð¶ÐµÐ½ Ð²Ñ‹Ð²Ð¾Ð´Ð¸Ñ‚ÑŒ:1
#  Ð² 2025-02-26 Ð´Ð¾Ð»Ð¶ÐµÐ½ Ð²Ñ‹Ð²Ð¾Ð´Ð¸Ñ‚ÑŒ:2
# from functools import  singledispatchmethod
# from datetime import date
#
#
from datetime import date
from functools import singledispatchmethod


class BirthInfo:
    @singledispatchmethod
    def __init__(self, birth_date):
        raise TypeError('ÐÑ€Ð³ÑƒÐ¼ÐµÐ½Ñ‚ Ð¿ÐµÑ€ÐµÐ´Ð°Ð½Ð½Ð¾Ð³Ð¾ Ñ‚Ð¸Ð¿Ð° Ð½Ðµ Ð¿Ð¾Ð´Ð´ÐµÑ€Ð¶Ð¸Ð²Ð°ÐµÑ‚ÑÑ')

    @__init__.register
    def _from_date(self, birth_date: date):
        self.birth_date = birth_date

    @__init__.register
    def _from_str(self, birth_date: str):
        try:
            self.birth_date = date.fromisoformat(birth_date)
        except ValueError:
            raise TypeError('ÐÑ€Ð³ÑƒÐ¼ÐµÐ½Ñ‚ Ð¿ÐµÑ€ÐµÐ´Ð°Ð½Ð½Ð¾Ð³Ð¾ Ñ‚Ð¸Ð¿Ð° Ð½Ðµ Ð¿Ð¾Ð´Ð´ÐµÑ€Ð¶Ð¸Ð²Ð°ÐµÑ‚ÑÑ') from None

    @__init__.register
    def _from_iter(self, birth_date: list | tuple):
        try:
            self.birth_date = date(*birth_date)
        except (TypeError, ValueError):
            raise TypeError('ÐÑ€Ð³ÑƒÐ¼ÐµÐ½Ñ‚ Ð¿ÐµÑ€ÐµÐ´Ð°Ð½Ð½Ð¾Ð³Ð¾ Ñ‚Ð¸Ð¿Ð° Ð½Ðµ Ð¿Ð¾Ð´Ð´ÐµÑ€Ð¶Ð¸Ð²Ð°ÐµÑ‚ÑÑ') from None

    @property
    def age(self):
        age = date.today().year - self.birth_date.year - 1
        print((date.today().month, date.today().day), (self.birth_date.month, self.birth_date.day))
        age += (date.today().month, date.today().day) >= (self.birth_date.month, self.birth_date.day)
        return age

birth_dates = [
    [2020],
    (2020,),
    [2020, 1],
    [2020, 1, '1'],
    (2020, 1),
    (2020, 1, '1'),
    [2020, 1, 1, 1],
    (2020, 1, 1, 1),
    [2020, '1', '1'],
    [2020, '1', 1],
]

for birth_date in birth_dates:
    try:
        birthinfo = BirthInfo(birth_date)
    except TypeError as e:
        print(e)


birthinfo1 = BirthInfo('2020-05-16')
birthinfo2 = BirthInfo(date(2010, 5, 18))
birthinfo3 = BirthInfo([2016, 5, 20])

print(birthinfo1.birth_date)
print(birthinfo2.birth_date)
print(birthinfo3.birth_date)

print(birthinfo1.age)
print(birthinfo2.age)
print(birthinfo3.age)







